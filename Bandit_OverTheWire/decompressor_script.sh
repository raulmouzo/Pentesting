#!/bin/bash


function ctrl_c(){
	echo -e "[!] Aborted!\n"
	exit 1
}

#Ctrl+C
trap ctrl_c INT

first_filename=data.txt
filename=file
result=$(file $filename | awk '{print $2}')
i=0


if [ ! -f "$first_filename" ]; then
    echo -e "[!]\tError! The file doesn't exist.\n"
    exit 1  
fi

xxd -r $first_filename $filename

while [ "$result" != "ASCII" ]
do 
	i=$(($i+1))
	7z e -so $filename | sponge $filename
	echo -e "[$i]\tDecompressed file type $(file $filename | awk '{print $2}') \n"
	result=$(file $filename | awk '{print $2}') 
done

cat $filename
cat $filename | awk 'NF>1 {print $NF}'| xclip -sel clip
rm $filename

echo -e "\n[+]\tPassword copied to clipboard!\n"

exit 0


